<template>
  <div class="main-container">
    <h2>Piscis</h2>

    <!-- background -->
    <div class="background">
      <div class="shootingStarContainer">
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
      </div>
      <div class="shootingStarContainer">
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
      </div>
      <div class="shootingStarContainer">
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
        <div class="shootingStar"></div>
      </div>

      <div class="stars"></div>
      <div class="twinkleMask"></div>
      <div class="twinkleMask2"></div>
      <div class="clouds"></div>

      <div class="fogContainer">
        <div class="fog"></div>
      </div>
    </div>

    <!-- svg path -->
    <div class="svg-container">
      <svg
        width="485"
        height="385"
        viewBox="0 0 485 385"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          id="path"
          d="M376.085 347.314C407.882 339.463 438.558 323.325 468.664 310.422C473.041 308.547 477.608 307.274 473.663 303.724C463.433 294.516 453.956 285.041 444.07 274.93C437.867 268.586 423.411 242.482 415.676 242.937C405.561 243.532 395.208 242.937 385.083 242.937C371.886 242.937 358.688 242.937 345.491 242.937C337.428 242.937 334.676 250.168 330.695 257.334C325.97 265.838 314.574 273.854 307.7 280.729C304.617 283.812 299.641 286.128 306.8 286.128C311.881 286.128 314.785 285.796 318.497 289.727C336.278 308.553 348.701 332.527 367.087 350.913C368.839 352.666 371.994 358.895 375.085 358.012C379.938 356.625 373.667 351.139 372.885 350.514C365.888 344.916 359.209 339.437 352.69 332.917C341.985 322.213 327.245 310.153 319.897 296.925C318.444 294.309 305.979 281.189 307.7 280.329C313.66 277.349 318.068 271.063 321.197 265.432C323.141 261.932 327.105 245.748 330.295 244.837C331.155 244.591 337.507 248.753 336.093 246.936C330.659 239.949 322.109 238.24 313.998 234.839C286.906 223.478 265.3 201.055 239.414 187.249C235.729 185.284 227.283 178.151 223.118 178.151C216.971 178.151 208.597 181.568 202.323 182.65C151.961 191.333 98.4347 188.962 49.456 199.846C46.7038 200.458 41.6059 204.345 46.7566 204.345C48.3805 204.345 48.5562 191.754 48.5562 190.748C48.5562 159.302 56.8449 125.561 62.1532 94.4695C64.4218 81.1821 69.852 67.0536 70.1515 53.5785C70.3888 42.9005 70.3597 33.0484 72.8509 22.5852C75.1032 13.1256 77.5936 23.2649 75.5503 23.3851C70.4923 23.6826 65.7423 23.151 60.7535 24.2849C48.6336 27.0394 33.7188 25.586 21.5621 23.785C19.9684 23.5489 6.10224 24.6134 5.46562 22.3853C2.9281 13.5039 13.1626 8.9882 20.6623 8.9882C35.8002 8.9882 50.0282 7.18859 65.6525 7.18859C69.1193 7.18859 88.9376 2.59935 83.5486 7.98842C80.003 11.5339 73.7507 18.0942 73.7507 23.3851"
          stroke="white"
          stroke-width="3"
          stroke-linecap="round"
        />
        <ellipse
          class="circle"
          id="pointFive"
          cx="72"
          cy="25.5"
          rx="10"
          ry="8.5"
          fill="#D11C1C"
        />
        <ellipse
          class="circle"
          id="pointSix"
          cx="10"
          cy="8.5"
          rx="10"
          ry="8.5"
          fill="#D11C1C"
        />
        <ellipse
          class="circle"
          id="pointThree"
          cx="222"
          cy="181.5"
          rx="10"
          ry="8.5"
          fill="#D11C1C"
        />
        <ellipse
          class="circle"
          id="pointTwo"
          cx="414"
          cy="244.5"
          rx="10"
          ry="8.5"
          fill="#D11C1C"
        />
        <ellipse
          class="circle"
          id="pointOne"
          cx="475"
          cy="304.5"
          rx="10"
          ry="8.5"
          fill="#D11C1C"
        />
        <ellipse
          class="circle"
          id="point"
          cx="47"
          cy="202.5"
          rx="10"
          ry="8.5"
          fill="#D11C1C"
        />
        <ellipse
          class="circle"
          id="pointFour"
          cx="47"
          cy="202.5"
          rx="10"
          ry="8.5"
          fill="#D11C1C"
        />
        <path
          d="M376.5 324L384.919 347.148H412.165L390.123 361.454L398.542 384.602L376.5 370.296L354.458 384.602L362.877 361.454L340.835 347.148H368.081L376.5 324Z"
          fill="#DAC719"
          id="star"
        />
      </svg>
    </div>

    <div
      v-show="isModalActive"
      class="modal-container"
      @click.self="closeModal"
    >
      <div class="modal">
        <div class="card">
          <h2>{{ title }}</h2>
          <h2>{{ artist }}</h2>
        </div>
        <button @click="closeModal" class="close-modal">Close Modal</button>
      </div>
    </div>

    <!-- nav -->
    <!-- <div id="nav">
      <button id="pause">pause</button>
      <input
        id="progressSlider"
        type="range"
        min="0"
        max="1"
        value="0"
        step="0.001"
      />
      <div id="time">0.00</div>
    </div> -->
  </div>
</template>

<script>
import { gsap } from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
import { MotionPathPlugin } from 'gsap/MotionPathPlugin.js';

gsap.registerPlugin(ScrollTrigger, MotionPathPlugin);
export default {
  mounted() {
    this.animations();
  },
  data() {
    return {
      isModalActive: false,
      title: '',
      artist: '',
      // artInfo: [
      //   { id: 1, name: 'one' },
      //   { id: 2, name: 'two' },
      //   { id: 3, name: 'three' },
      //   { id: 4, name: 'four' },
      //   { id: 5, name: 'five' },
      //   { id: 6, name: 'six' },
      //   { id: 7, name: 'seven' },
      // ],
    };
  },
  methods: {
    closeModal() {
      this.isModalActive = !this.isModalActive;
    },
    animations() {
      //input slider
      let select = (e) => document.querySelector(e);
      // let selectAll = (e) => document.querySelectorAll(e);

      // let progressSlider = select('#progressSlider');
      // let time = select('#time');
      // let pause = select('#pause');
      // let star = select('#star');
      let pointOne = select('#pointOne');
      let pointTwo = select('#pointTwo');
      let pointFour = select('#pointFour');
      let pointThree = select('#pointThree');
      let pointSix = select('#pointSix');
      let pointFive = select('#pointFive');

      let animation = gsap
        .to('#star', {
          duration: 16,
          ease: 'none',

          motionPath: {
            path: '#path',
            align: '#star',
          },
        })
        .pause();

      const showModal = () => {
        setTimeout(() => {
          this.isModalActive = !this.isModalActive;
        }, 500);
      };

      // points
      pointOne.addEventListener('click', () => {
        this.title = 'Image One';
        this.artist = 'Artist one';
        animation.pause();
        gsap.to(animation, {
          progress: 0.08,
          onComplete: showModal,
        });
      });
      pointTwo.addEventListener('click', () => {
        this.title = 'Image Two';
        this.artist = 'Artist Two';
        animation.pause();
        gsap.to(animation, {
          progress: 0.15,
          onComplete: showModal,
        });
      });

      pointThree.addEventListener('click', () => {
        this.title = 'Image Three';
        this.artist = 'Artist Three';
        animation.pause();
        gsap.to(animation, {
          progress: 0.57,
          onComplete: showModal,
        });
      });

      pointFour.addEventListener('click', () => {
        this.title = 'Image Four';
        this.artist = 'Artist Four';
        animation.pause();
        gsap.to(animation, {
          progress: 0.7,
          onComplete: showModal,
        });
      });

      pointFive.addEventListener('click', () => {
        this.title = 'Image Quinto';
        this.artist = 'Artist Quinto';

        animation.pause();
        gsap.to(animation, {
          progress: 0.85,
          onComplete: showModal,
        });
      });
      pointSix.addEventListener('click', () => {
        this.title = 'Image sixth';
        this.artist = 'Artist sixth';
        animation.pause();
        gsap.to(animation, {
          progress: 0.94,
          onComplete: showModal,
        });
      });
    },
  },
};
</script>

<style scoped>
.svg-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
}
.background {
  position: relative;
  height: 700px;
  overflow: hidden;
}
#nav {
  width: 100%;
  display: flex;
  align-content: center;
  justify-content: center;
  position: fixed;
  bottom: 0;
  height: 50px;
  background: #333;
  z-index: 10;
}

#nav div {
  align-self: center;
  font-size: 22px;
}

#progressSlider {
  width: 600px;
  margin-left: 16px;
  margin-right: 16px;
}

button {
  border-radius: 10px;
  background: #ffc34c;
  color: #444;
  font-size: 14px;
  margin: 10px;
  font-weight: 700;
  width: 5em;
}

#time {
  width: 80px;
}

svg {
  width: 700px;
  height: 900px;
}

* {
  margin: 0;
  padding: 0;
}
/* Modal */
.modal-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.8);
  z-index: 10;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 2s linear;
}
.modal {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: steelblue;
  gap: 2rem;
  max-width: 600px;
  width: 100%;
  height: 600px;
  border-radius: 20px;
}

/* Stars */

.shootingStarContainer:nth-child(1) {
  position: absolute;
  width: 100%;
  height: 130%;
  transform: rotate(41deg);
  z-index: 10;
}
.shootingStarContainer:nth-child(2) {
  position: absolute;
  width: 100%;
  height: 130%;
  transform: rotate(42deg);
  z-index: 10;
}
.shootingStarContainer:nth-child(3) {
  position: absolute;
  width: 100%;
  height: 130%;
  transform: rotate(39deg);
  z-index: 10;
}

.shootingStar {
  position: absolute;
  height: 1px;
  background: linear-gradient(-70deg, #ffebeb, black);
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(1) {
  left: calc(25%);
  top: calc(95%);
  -webkit-animation: shootingFrames 2635ms ease-in-out 2789ms;
  animation: shootingFrames 2635ms ease-in-out 2789ms;
  opacity: 0.25;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(2) {
  left: calc(24%);
  top: calc(96%);
  -webkit-animation: shootingFrames 769ms ease-in-out 42875ms;
  animation: shootingFrames 769ms ease-in-out 42875ms;
  opacity: 0.26;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(3) {
  left: calc(50%);
  top: calc(36%);
  -webkit-animation: shootingFrames 2719ms ease-in-out 16457ms;
  animation: shootingFrames 2719ms ease-in-out 16457ms;
  opacity: 0.59;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(4) {
  left: calc(1%);
  top: calc(58%);
  -webkit-animation: shootingFrames 1008ms ease-in-out 8755ms;
  animation: shootingFrames 1008ms ease-in-out 8755ms;
  opacity: 0.73;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(5) {
  left: calc(4%);
  top: calc(68%);
  -webkit-animation: shootingFrames 1153ms ease-in-out 49278ms;
  animation: shootingFrames 1153ms ease-in-out 49278ms;
  opacity: 0.43;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(6) {
  left: calc(42%);
  top: calc(76%);
  -webkit-animation: shootingFrames 1600ms ease-in-out 27003ms;
  animation: shootingFrames 1600ms ease-in-out 27003ms;
  opacity: 0.77;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(7) {
  left: calc(15%);
  top: calc(60%);
  -webkit-animation: shootingFrames 2697ms ease-in-out 8359ms;
  animation: shootingFrames 2697ms ease-in-out 8359ms;
  opacity: 0.8;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(8) {
  left: calc(44%);
  top: calc(87%);
  -webkit-animation: shootingFrames 2534ms ease-in-out 27837ms;
  animation: shootingFrames 2534ms ease-in-out 27837ms;
  opacity: 0.18;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(9) {
  left: calc(46%);
  top: calc(3%);
  -webkit-animation: shootingFrames 1184ms ease-in-out 28841ms;
  animation: shootingFrames 1184ms ease-in-out 28841ms;
  opacity: 0.32;
}
.shootingStarContainer:nth-child(1) .shootingStar:nth-child(10) {
  left: calc(48%);
  top: calc(14%);
  -webkit-animation: shootingFrames 1793ms ease-in-out 21597ms;
  animation: shootingFrames 1793ms ease-in-out 21597ms;
  opacity: 0.46;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(1) {
  left: calc(23%);
  top: calc(50%);
  -webkit-animation: shootingFrames 2235ms ease-in-out 6979ms;
  animation: shootingFrames 2235ms ease-in-out 6979ms;
  opacity: 0.19;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(2) {
  left: calc(1%);
  top: calc(79%);
  -webkit-animation: shootingFrames 2251ms ease-in-out 26527ms;
  animation: shootingFrames 2251ms ease-in-out 26527ms;
  opacity: 0.63;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(3) {
  left: calc(39%);
  top: calc(90%);
  -webkit-animation: shootingFrames 1085ms ease-in-out 7954ms;
  animation: shootingFrames 1085ms ease-in-out 7954ms;
  opacity: 0.84;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(4) {
  left: calc(45%);
  top: calc(35%);
  -webkit-animation: shootingFrames 1638ms ease-in-out 57071ms;
  animation: shootingFrames 1638ms ease-in-out 57071ms;
  opacity: 0.63;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(5) {
  left: calc(31%);
  top: calc(44%);
  -webkit-animation: shootingFrames 2514ms ease-in-out 57386ms;
  animation: shootingFrames 2514ms ease-in-out 57386ms;
  opacity: 0.87;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(6) {
  left: calc(31%);
  top: calc(32%);
  -webkit-animation: shootingFrames 2547ms ease-in-out 50522ms;
  animation: shootingFrames 2547ms ease-in-out 50522ms;
  opacity: 0.46;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(7) {
  left: calc(18%);
  top: calc(33%);
  -webkit-animation: shootingFrames 838ms ease-in-out 49079ms;
  animation: shootingFrames 838ms ease-in-out 49079ms;
  opacity: 0.34;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(8) {
  left: calc(15%);
  top: calc(55%);
  -webkit-animation: shootingFrames 2165ms ease-in-out 4182ms;
  animation: shootingFrames 2165ms ease-in-out 4182ms;
  opacity: 0.45;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(9) {
  left: calc(39%);
  top: calc(16%);
  -webkit-animation: shootingFrames 2727ms ease-in-out 41845ms;
  animation: shootingFrames 2727ms ease-in-out 41845ms;
  opacity: 0.16;
}
.shootingStarContainer:nth-child(2) .shootingStar:nth-child(10) {
  left: calc(50%);
  top: calc(8%);
  -webkit-animation: shootingFrames 2575ms ease-in-out 12965ms;
  animation: shootingFrames 2575ms ease-in-out 12965ms;
  opacity: 0.74;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(1) {
  left: calc(27%);
  top: calc(75%);
  -webkit-animation: shootingFrames 1643ms ease-in-out 52790ms;
  animation: shootingFrames 1643ms ease-in-out 52790ms;
  opacity: 0.58;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(2) {
  left: calc(4%);
  top: calc(35%);
  -webkit-animation: shootingFrames 1671ms ease-in-out 40906ms;
  animation: shootingFrames 1671ms ease-in-out 40906ms;
  opacity: 0.82;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(3) {
  left: calc(19%);
  top: calc(13%);
  -webkit-animation: shootingFrames 2371ms ease-in-out 52140ms;
  animation: shootingFrames 2371ms ease-in-out 52140ms;
  opacity: 0.39;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(4) {
  left: calc(26%);
  top: calc(37%);
  -webkit-animation: shootingFrames 2422ms ease-in-out 28529ms;
  animation: shootingFrames 2422ms ease-in-out 28529ms;
  opacity: 0.29;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(5) {
  left: calc(28%);
  top: calc(23%);
  -webkit-animation: shootingFrames 872ms ease-in-out 46603ms;
  animation: shootingFrames 872ms ease-in-out 46603ms;
  opacity: 0.19;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(6) {
  left: calc(34%);
  top: calc(37%);
  -webkit-animation: shootingFrames 2111ms ease-in-out 25153ms;
  animation: shootingFrames 2111ms ease-in-out 25153ms;
  opacity: 0.78;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(7) {
  left: calc(4%);
  top: calc(10%);
  -webkit-animation: shootingFrames 2660ms ease-in-out 48705ms;
  animation: shootingFrames 2660ms ease-in-out 48705ms;
  opacity: 0.61;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(8) {
  left: calc(33%);
  top: calc(6%);
  -webkit-animation: shootingFrames 1718ms ease-in-out 1602ms;
  animation: shootingFrames 1718ms ease-in-out 1602ms;
  opacity: 0.44;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(9) {
  left: calc(47%);
  top: calc(92%);
  -webkit-animation: shootingFrames 930ms ease-in-out 29001ms;
  animation: shootingFrames 930ms ease-in-out 29001ms;
  opacity: 0.45;
}
.shootingStarContainer:nth-child(3) .shootingStar:nth-child(10) {
  left: calc(49%);
  top: calc(82%);
  -webkit-animation: shootingFrames 1454ms ease-in-out 56657ms;
  animation: shootingFrames 1454ms ease-in-out 56657ms;
  opacity: 0.42;
}

@-webkit-keyframes shootingFrames {
  0% {
    transform: translateX(0);
    width: 0;
  }
  30% {
    width: 200px;
  }
  100% {
    width: 0;
    transform: translateX(806px);
  }
}

@keyframes shootingFrames {
  0% {
    transform: translateX(0);
    width: 0;
  }
  30% {
    width: 200px;
  }
  100% {
    width: 0;
    transform: translateX(806px);
  }
}
.stars,
.twinkleMask,
.twinkleMask2,
.clouds {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  display: block;
}

.stars {
  background: #000 url('https://wolf.drjm.co.uk/nightsky/stars.jpg') repeat top
    center;
  z-index: 0;
}

.twinkleMask {
  background: transparent
    url('https://wolf.drjm.co.uk/nightsky/twinklemask.png') repeat top center;
  z-index: 1;
  -webkit-animation: twinkleFrames 700s linear infinite;
  animation: twinkleFrames 700s linear infinite;
}

.twinkleMask2 {
  background: transparent
    url('https://wolf.drjm.co.uk/nightsky/twinkleMask2.png') repeat top center;
  z-index: 2;
  height: 200%;
  -webkit-animation: twinkleFrames2 300s linear infinite;
  animation: twinkleFrames2 300s linear infinite;
}

.clouds {
  background: transparent url('https://wolf.drjm.co.uk/nightsky/clouds.png')
    repeat top center;
  z-index: 3;
  height: 150%;
  -webkit-animation: cloudsFrames 300s linear infinite;
  animation: cloudsFrames 300s linear infinite;
}

.fogContainer {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  position: relative;
  z-index: 7;
}

.fog {
  position: absolute;
  left: -50%;
  top: -30%;
  width: 200%;
  height: 200%;
  -webkit-animation-name: fogFrames;
  animation-name: fogFrames;
  -webkit-animation-duration: 60s;
  animation-duration: 60s;
  -webkit-animation-timing-function: linear;
  animation-timing-function: linear;
  -webkit-animation-iteration-count: infinite;
  animation-iteration-count: infinite;
  -webkit-animation-direction: alternate;
  animation-direction: alternate;
  background: linear-gradient(
    -5deg,
    #00000000 0%,
    #ffffff15 40%,
    #74590121 45%,
    #8b845b21 55%,
    #00000000 70%
  );
}

@-webkit-keyframes fogFrames {
  0% {
    transform: none;
  }
  10% {
    transform: scaleY(0.75) translate(5%, -2%) rotate(15deg);
  }
  25% {
    transform: scaleY(1) translate(10%, 7%);
  }
  50% {
    transform: scaleY(0.5) rotate(-15deg);
  }
  75% {
    transform: scaleY(0.2) translate(7%, -2%);
  }
  100% {
    transform: none;
  }
}

@keyframes fogFrames {
  0% {
    transform: none;
  }
  10% {
    transform: scaleY(0.75) translate(5%, -2%) rotate(15deg);
  }
  25% {
    transform: scaleY(1) translate(10%, 7%);
  }
  50% {
    transform: scaleY(0.5) rotate(-15deg);
  }
  75% {
    transform: scaleY(0.2) translate(7%, -2%);
  }
  100% {
    transform: none;
  }
}
@-webkit-keyframes twinkleFrames {
  from {
    background-position: 0 0;
  }
  to {
    background-position: -10000px 5000px;
  }
}
@keyframes twinkleFrames {
  from {
    background-position: 0 0;
  }
  to {
    background-position: -10000px 5000px;
  }
}
@-webkit-keyframes twinkleFrames2 {
  from {
    background-position: 0 0;
  }
  to {
    background-position: 10000px 5000px;
  }
}
@keyframes twinkleFrames2 {
  from {
    background-position: 0 0;
  }
  to {
    background-position: 10000px 5000px;
  }
}
@-webkit-keyframes cloudsFrames {
  from {
    background-position: 0 0;
  }
  to {
    background-position: 10000px 0;
  }
}
@keyframes cloudsFrames {
  from {
    background-position: 0 0;
  }
  to {
    background-position: 10000px 0;
  }
}
</style>
